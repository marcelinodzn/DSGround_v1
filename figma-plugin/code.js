(()=>{"use strict";({383:function(){var t=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((o=o.apply(t,e||[])).next())}))};function e(t){return t>=700?"Bold":t>=600?"SemiBold":t>=500?"Medium":t>=400?"Regular":t>=300?"Light":"Regular"}function n(t,e){if(!t.scale)return null;const{baseSize:n,ratio:o,stepsUp:a,stepsDown:i}=t.scale,r=e.match(/f(-?\d+)/);if(!r)return null;const s=parseInt(r[1],10);return s>=0?n*Math.pow(o,s):n/Math.pow(o,Math.abs(s))}figma.showUI(__html__,{width:450,height:550}),figma.ui.onmessage=o=>t(void 0,void 0,void 0,(function*(){if("import-typography"===o.type)try{const a=(t=o.typographyData,console.log("Normalizing data:",t),Array.isArray(t)||(console.warn("Data is not an array, attempting to convert"),t=t&&t.platforms&&Array.isArray(t.platforms)?t.platforms:[t]),t.map((t=>{var e,n,o,a;if(!t)return null;const i={id:t.id||`platform-${Math.random().toString(36).substr(2,9)}`,name:t.name||"Unnamed Platform",scale:{baseSize:(null===(e=t.scale)||void 0===e?void 0:e.baseSize)||16,ratio:(null===(n=t.scale)||void 0===n?void 0:n.ratio)||1.25,stepsUp:(null===(o=t.scale)||void 0===o?void 0:o.stepsUp)||5,stepsDown:(null===(a=t.scale)||void 0===a?void 0:a.stepsDown)||2},typeStyles:[]},r=t.typeStyles||[];return i.typeStyles=r.map((t=>({id:t.id||`style-${Math.random().toString(36).substr(2,9)}`,name:t.name||"Unnamed Style",scaleStep:t.scaleStep||"f0",fontFamily:t.fontFamily||"Inter",fontWeight:t.fontWeight||400,lineHeight:t.lineHeight||1.5,lineHeightUnit:t.lineHeightUnit||"multiplier",letterSpacing:t.letterSpacing||0,opticalSize:t.opticalSize||0,fontSize:t.fontSize,textTransform:t.textTransform||"none"}))),i})).filter(Boolean));console.log("Normalized data:",a);for(const t of a){if(console.log("Processing platform:",t),!t||"object"!=typeof t){console.warn("Invalid platform data:",t);continue}if(!t.typeStyles||!Array.isArray(t.typeStyles)||0===t.typeStyles.length){console.warn("No type styles found for platform:",t.name);continue}const o=`${t.name} Typography`;for(const a of t.typeStyles){console.log("Processing style:",a);const i=n(t,a.scaleStep),r=a.fontSize||i||16,s=figma.createTextStyle();s.name=`${o}/${a.name}`,s.description=`Scale step: ${a.scaleStep}`,yield figma.loadFontAsync({family:a.fontFamily||"Inter",style:e(a.fontWeight)}),s.fontName={family:a.fontFamily||"Inter",style:e(a.fontWeight)},s.fontSize=r,a.lineHeightUnit,s.lineHeight={unit:"PERCENT",value:100*a.lineHeight},s.letterSpacing={unit:"PERCENT",value:100*a.letterSpacing},"uppercase"===a.textTransform?s.textCase="UPPER":"lowercase"===a.textTransform?s.textCase="LOWER":"capitalize"===a.textTransform?s.textCase="TITLE":s.textCase="ORIGINAL"}}figma.ui.postMessage({type:"import-success"})}catch(t){console.error("Error in import-typography:",t),figma.ui.postMessage({type:"import-error",message:t instanceof Error?t.message:"An unknown error occurred"})}else"close"===o.type&&figma.closePlugin();var t}))}})[383]()})();